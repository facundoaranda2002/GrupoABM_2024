<!-- Header -->
<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-icon
        (click)="atras()"
        size="large"
        name="arrow-back-outline"
      ></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<!-- Contenido Principal -->
<ion-content>
  <!-- Si es Mozo -->
  <ng-container *ngIf="!isClientProfile; else clientView">
    <!-- Listado usuarios sin asignar mesa-->
    @if(!usuarioAsignar){
    <ion-text color="white">
      <h2>Seleccione un cliente:</h2>
    </ion-text>
    <div class="users">
      <div
        class="user-container"
        (click)="onUserClick(user.mail)"
        *ngFor="let user of this.usuariosSinMesa"
      >
        <div>
          <span>{{user.nombre}}</span>
        </div>
      </div>
    </div>
    } @else{
    <!-- Listado Mesas -->
    <ion-text color="white">
      <h2>Seleccione una mesa</h2>
    </ion-text>
    <ion-grid>
      <ion-row>
        <ion-col size="12" *ngFor="let number of numbers">
          <ion-button
            color="secondary"
            expand="block"
            (click)="asignarNumeroMesa(number)"
            [disabled]="estaAsignada(number)"
            style="font-size: 30px; font-weight: bold"
          >
            Mesa {{ number }}
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
    }
    <!-- Texto Mesa -->
    @if(qrCodeImageUrl){
    <div class="textoAsignarMesa">
      <ion-text color="white">
        <h2>Mesa asignada numero:</h2>
      </ion-text>
      <ion-text color="white">
        <h2>{{ numeroMesaMaitre }}</h2>
      </ion-text>
    </div>
    }
  </ng-container>
  <!-- Si es Cliente -->
  <ng-template #clientView>
    <ion-button class="submit" (click)="startScan()" expand="block">
      Escanear Mesa
      <ion-icon slot="end" name="scan-outline"></ion-icon>
    </ion-button>
    <!-- <h1>Mesa escaneada numero: </h1>
    <h1>{{scanResoult}}</h1> -->
    <div *ngIf="yaEscaneada">
      <div *ngIf="mesaYaAsignada; else notAssigned">
        <ion-text
          color="danger"
          style="
            font-size: 50px;
            font-weight: bold;
            text-align: center;
            display: block;
          "
          ><br /><br />
          Esta mesa la tiene asignada otro cliente, no la puede usar.
        </ion-text>
      </div>
      <ng-template #notAssigned>
        <ion-text
          style="
            font-size: 35px;
            font-weight: bold;
            text-align: center;
            display: block;
          "
          ><br /><br />
          Su mesa es la numero: <br /><br /><br /><br />
        </ion-text>
        <ion-text
          style="
            font-size: 150px;
            font-weight: bold;
            text-align: center;
            display: block;
          "
        >
          <!-- Su mesa es la numero {{scanResoult}} -->
          {{ mesaAsignada }}
        </ion-text>
      </ng-template>
    </div>
  </ng-template>
</ion-content>
